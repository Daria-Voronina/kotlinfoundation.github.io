"use strict";(self.webpackChunkkotlinfoundation_github_io=self.webpackChunkkotlinfoundation_github_io||[]).push([[510],{627:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return r},default:function(){return p}});var n=a(3366),i=(a(7294),a(3497)),o=a(5149),l=["components"],r={},s={_frontmatter:r},u=o.Z;function p(e){var t=e.components,a=(0,n.Z)(e,l);return(0,i.kt)(u,Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",null,"Language Committee guidelines"),(0,i.kt)("p",null,"The Kotlin Language Committee has to approve every ",(0,i.kt)("a",{parentName:"p",href:"https://kotlinlang.org/docs/kotlin-evolution.html#incompatible-changes"},"incompatible change")," before it lands in a stable version. The committee determines whether the change is appropriate and motivated enough to be introduced and what deprecation procedures have to be carried out to ensure comfortable migration for end users."),(0,i.kt)("p",null,"These guidelines describe the process the Committee follows and the criteria used for decision making. We realize that these criteria can not be fully formalized and treat them as general guidelines, not a mechanical set of rules."),(0,i.kt)("h2",null,"Review process"),(0,i.kt)("p",null,"Incompatible changes are submitted to the Language Committee by the ",(0,i.kt)("a",{parentName:"p",href:"/structure/"},"Lead Language Designer"),". The Committee evaluates the implications of such changes, considering the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Substance: what is going to be changed"),(0,i.kt)("li",{parentName:"ul"},"Impact: who will be affected by the change and in what ways"),(0,i.kt)("li",{parentName:"ul"},"Motivation: why the change is needed"),(0,i.kt)("li",{parentName:"ul"},"Detectability: can problematic code be automatically detected"),(0,i.kt)("li",{parentName:"ul"},"Migration: to what extent can the code be migrated automatically")),(0,i.kt)("h3",null,"Estimating impact"),(0,i.kt)("p",null,"When in doubt, we inspect large bodies of code available to us and test the implementations in EAP builds to collect information about the expected impact of a change."),(0,i.kt)("h3",null,"Proposals"),(0,i.kt)("p",null,"A proposal is usually written by a developer responsible for the change or the relevant subsystems. See the ",(0,i.kt)("a",{parentName:"p",href:"/submitting-incompatible-changes/"},"Guide to submitting incompatible changes"),"."),(0,i.kt)("p",null,"When an issue has all the necessary details, it can be scheduled for review by the Language Committee. Approved proposals are to be implemented by the development team and shipped in the appropriate stable release."),(0,i.kt)("h2",null,"Scope"),(0,i.kt)("p",null,"Only features and components published as ",(0,i.kt)("a",{parentName:"p",href:"https://kotlinlang.org/docs/components-stability.html#stability-levels-explained"},"Stable")," are in the scope of Language Committee. Besides, the Language Committee's scope is limited to the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Language: syntax, static checks, execution semantics of language constructs"),(0,i.kt)("li",{parentName:"ul"},"The interop subsystem of the language: how foreign declarations are seen from Kotlin, and how Kotlin declarations are seen from other languages"),(0,i.kt)("li",{parentName:"ul"},"Compatibility of binary artifacts produced by kotlinc with one another and with other binaries (e.g. Java binaries)"),(0,i.kt)("li",{parentName:"ul"},"Standard library: API and contracts of the declarations in kotlin-stdlib (and its extensions such as for ",(0,i.kt)("inlineCode",{parentName:"li"},"kotlin-stdlib-jdk7"),")"),(0,i.kt)("li",{parentName:"ul"},"CLI parameters of the compiler except for the ",(0,i.kt)("inlineCode",{parentName:"li"},"-X/-XX")," keys"),(0,i.kt)("li",{parentName:"ul"},"KDoc syntax")),(0,i.kt)("p",null,"For example, the following matters are out of scope for the Language Committee:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Pre-stable language features & APIs"),(0,i.kt)("li",{parentName:"ul"},"Build tools and plugins for them (e.g. Gradle support)"),(0,i.kt)("li",{parentName:"ul"},"IDE and static analysis tools (other than the compiler)"),(0,i.kt)("li",{parentName:"ul"},"Java2Kotlin converter and other source code manipulation tools"),(0,i.kt)("li",{parentName:"ul"},"APIs and contracts of libraries other than the standard library"),(0,i.kt)("li",{parentName:"ul"},"API of the compiler"),(0,i.kt)("li",{parentName:"ul"},"Scripting support and Compiler REPL"),(0,i.kt)("li",{parentName:"ul"},"Internal packages of the standard library")),(0,i.kt)("p",null,"Also, see ",(0,i.kt)("a",{parentName:"p",href:"#appendix-a-examples-of-non-issues"},"Appendix A")," for examples of changes that are not considered to be compatibility issues."),(0,i.kt)("h2",null,"Migration aids and deprecation"),(0,i.kt)("p",null,"Normally, incompatible changes to stable features only land in feature releases. We announce the changes in a previous release (it may be an incremental update to the previous feature release, but should allow enough time for users to migrate their code). "),(0,i.kt)("p",null,"The announcement is best done through compiler warnings, or in some cases IDE inspections and/or other tools. If places in the code that should be changed in advance to prevent compatibility issues in the future can be detected automatically, we announce the change and publish detection tools. "),(0,i.kt)("p",null,"If the necessary changes to user code can be automated, we publish a migration tool along with the announcement. Preferably, the IDE should suggest running the migration when it encounters deprecated constructs in the code."),(0,i.kt)("p",null,"When automatic detection and/or migration is not practically possible, we publish instructions on how user code should be adjusted."),(0,i.kt)("h3",null,"Insignificant changes"),(0,i.kt)("p",null,"Some types of changes can be made without a deprecation cycle:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Small fixes that virtually no users will encounter can normally be made right away (but still require committee review)"),(0,i.kt)("li",{parentName:"ul"},"Bugs causing compiler errors in good code can be fixed right away"),(0,i.kt)("li",{parentName:"ul"},"Bugs causing bad code to compile, but always fail at runtime can be fixed right away")),(0,i.kt)("h3",null,"Incompatible changes to the language"),(0,i.kt)("p",null,"The typical deprecation cycle for an incompatible language change:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The change planned for version B is announced in release notes to a previous version A",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The compiler reports deprecation warnings (messages provide some guidance to possible replacements)"),(0,i.kt)("li",{parentName:"ul"},"Automated migration tools are available in the IDE"),(0,i.kt)("li",{parentName:"ul"},"For eligible changes, the ",(0,i.kt)("inlineCode",{parentName:"li"},"-progressive")," flag enables the change before version B (e.g. in version A or an incremental update to it)"))),(0,i.kt)("li",{parentName:"ul"},"Version B ships with the change enabled (e.g. warnings turn into errors)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Migrations aids are kept available in the IDE "),(0,i.kt)("li",{parentName:"ul"},"Backward compatibility flags in the compiler (",(0,i.kt)("inlineCode",{parentName:"li"},"-language-version")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"-api-version"),") support the behavior of version A"))),(0,i.kt)("li",{parentName:"ul"},"Future versions can remove migration aids and compatibility flags, but a version capable of automated migration should be kept available for a reasonable amount of time")),(0,i.kt)("h3",null,"Incompatible changes to the libraries"),(0,i.kt)("p",null,"The typical deprecation cycle for libraries:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The change planned for version B is announced in release notes to a previous version A",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Relevant declarations are marked as ",(0,i.kt)("inlineCode",{parentName:"li"},"@Deprecated(level = WARNING)")),(0,i.kt)("li",{parentName:"ul"},"Migration is automated through ReplaceWith or sometimes custom tooling"),(0,i.kt)("li",{parentName:"ul"},"In some cases an optional support dependency that exposes the same API is published"))),(0,i.kt)("li",{parentName:"ul"},"Version B marks the declarations as ",(0,i.kt)("inlineCode",{parentName:"li"},"@Deprecated(level = ERROR)")),(0,i.kt)("li",{parentName:"ul"},"Version C can mark the declarations as ",(0,i.kt)("inlineCode",{parentName:"li"},"@Deprecated(level = HIDDEN)"),"    ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Note: for inline functions, complete removal is sometimes possible at this point")))),(0,i.kt)("h2",null,"Changes to these guidelines"),(0,i.kt)("p",null,"Changes to these guidelines need to be approved by the Kotlin Language Committee."),(0,i.kt)("p",null,"Any proposed change needs to be published in advance providing a reasonable time to allow for comments on the change by the Kotlin Community."),(0,i.kt)("h2",null,"Appendix A. Examples of non-issues"),(0,i.kt)("p",null,"The following cases are not considered to be compatibility issues and thus are out of scope for the Language Committee."),(0,i.kt)("h3",null,"Changes related to binaries and translation"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A binary compiled against kotlin-stdlib fails to link or run because kotlin-stdlib is absent or outdated (older version than used during compilation)."),(0,i.kt)("li",{parentName:"ul"},"Adding generic parameters to existing declarations does not change the ABI on the JVM (due to erasure)."),(0,i.kt)("li",{parentName:"ul"},"Changes to signatures of functions marked ",(0,i.kt)("inlineCode",{parentName:"li"},"@InlineOnly")," are not changing the ABI on the JVM."),(0,i.kt)("li",{parentName:"ul"},"Adding supertypes to existing library classes/interfaces.")),(0,i.kt)("h3",null,"Source language changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Code compilable with a newer version fails to compile with an older version (e.g. due to usages of new language features)."),(0,i.kt)("li",{parentName:"ul"},"The code breaks only if the user alters the build configuration or compiler settings explicitly (i.e. in addition to advancing the compiler version).")),(0,i.kt)("h3",null,"Library changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Relaxing a contract on existing APIs."),(0,i.kt)("li",{parentName:"ul"},"Clarification for unspecified behaviors."),(0,i.kt)("li",{parentName:"ul"},"Changes in ",(0,i.kt)("inlineCode",{parentName:"li"},"hashCode()")," are not breaking changes."),(0,i.kt)("li",{parentName:"ul"},"Changes in ",(0,i.kt)("inlineCode",{parentName:"li"},"toString()")," on other than ",(0,i.kt)("inlineCode",{parentName:"li"},"Boolean"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"Numeric"),", and ",(0,i.kt)("inlineCode",{parentName:"li"},"String")," types are not breaking changes."),(0,i.kt)("li",{parentName:"ul"},"Issues connected with loading of two different versions of the same library at runtime or link time.")),(0,i.kt)("h3",null,"Changes affecting performance"),(0,i.kt)("p",null,"We recognize that runtime performance and bytecode size are important metrics, and will make reasonable effort to keep them in a good shape, but we don't consider every slowdown (e.g. in edge cases or in very cold code) and every extra byte in the classfile a breaking change."),(0,i.kt)("h2",null,"Appendix B. Assumptions for pragmatic language evolution"),(0,i.kt)("p",null,"We make decisions on language changes under the assumption that most user code is designed with the following considerations in mind. We do not optimize for smooth migration that disregards these considerations."),(0,i.kt)("h3",null,"Availability of the standard library"),(0,i.kt)("p",null,"All Kotlin code should be linked and run against the Standard Library of at least the same version as specified by the ",(0,i.kt)("inlineCode",{parentName:"p"},"-api-version")," upon compilation."),(0,i.kt)("h3",null,"Type inference and overload resolution algorithms"),(0,i.kt)("p",null,"Improvements in type inference algorithms may result in more precise static types known for some expressions, this may cause changes in overload resolution and even in signatures of declarations that don't specify return types explicitly."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Overloads of the same function should be intended to do the same thing"),". Language improvements may cause a different overload to be selected in a new language version."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Declarations sensitive to API/ABI stability (e.g. public APIs) should specify return types explicitly"),". Language improvements may cause a different type to be inferred for a given body expression. Also, some innocuous-looking changes in the source code, done by the user, may cause similar effects. "),(0,i.kt)("h3",null,"Non-public API"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Internal declarations have no separate compilation guarantees"),". While sometimes accessible from other languages (e.g. Java), declarations marked ",(0,i.kt)("strong",{parentName:"p"},"internal")," in Kotlin should not be called from outside the module they are declared in."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Private and synthetic declarations should not be relied upon"),". On some platforms, reflection has access to declarations marked private and synthetic. We do not provide any compatibility guarantees for code that relies on such access."),(0,i.kt)("h3",null,"Impedance mismatches across language boundaries"),(0,i.kt)("p",null,"A Kotlin API exposed to another language may yield values that work in that language differently from Kotlin. For example, Kotlin's unsigned integers will look signed for Java clients, and the programmer that works with the same API in the Java code will be surprised by getting different result. While an undesirable situation, this is sometimes inevitable, and should not be considered a breaking change (it does not fall under the intuitive definition of one anyway)."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-language-committee-guidelines-md-a3a26ed7ba8b423edcbf.js.map